# mindbox_test

При выполнении задания ход рассуждений был таким:
* Требуется поддерживать инвариант, согласно которому сторона или радиус могут принимать только положительные значения.
* Хочется вынести проверку этого инварианта, чтобы при добавлении новой фигуры его не делать.
* Расчет характерстик фигуры должен быть абстрагирован от типа единиц измерения.
* Система типов должна быть спроектирована таким образом, чтобы отражать различия в типах единицах измерений. Например, если мы имеем периметр со значением 5 и площадь со значением 5, то они не должны быть равны между собой, потому что они характеризуются разными единицами измерения.

Для этого создан `MeasurementUnit`, который является объектом-значением и поддерживает инвариант `value <= 0`. Каждая фигура работает с обобщенной единицой измерения. Но такая модель создает 2 проблемы. Во-первых, несмотря на абстрагирование от типа единицы измерения, мы привязываемся к единице измерения вообще. Иными словами, клиент будет обязан пользоваться той или иной системой измерений при создании фигур. Во-вторых, возникает трудность в получении инстанса обобщенной единицы измерения, т.к. хочется оставить её иммутабельной, а констрейт с конструктором с параметрами сделать нельзя.

Несмотря на эти проблемы, модель решает поставленные выше условия. При добавлении новой фигуры с использованием разработанной системы типов мы можем быть уверены в валидном состоянии объекта и не сложить случайно кубические и квадратные сантиметры. Поэтому я решил остановиться на этом решении, а проблему инстанса дженерик типа решил через экспрешены, оверхед минимальный по сравнению с `Activator.GetInstance` или `ConstructorInfo.Invoke`. Хотя все равно это остается хаком (

В общем, решение далеко не идеальное, но рабочее. Можно было бы начать все с чистого листа, но это заняло бы еще времени, которого не так много. С удовольствием бы послушал, как можно было бы его улучшить и какие есть альтернативы.

